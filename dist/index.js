!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("redux")):"function"==typeof define&&define.amd?define(["exports","redux"],n):n(e["redux-extensible-store"]={},e.redux)}(this,function(e,n){"use strict";var r="@@injectableStore/INJECT_REDUCERS",t="@@injectableStore/REMOVE_REDUCERS",a="@@injectableStore/INJECT_SAGA",c="@@injectableStore/CANCEL_SAGA";function u(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function o(e){return function n(r){return 0===arguments.length||u(r)?n:e.apply(this,arguments)}}function i(e){return function n(r,t){switch(arguments.length){case 0:return n;case 1:return u(r)?n:o(function(n){return e(r,n)});default:return u(r)&&u(t)?n:u(r)?o(function(n){return e(n,t)}):u(t)?o(function(n){return e(r,n)}):e(r,t)}}}function s(e){return function n(r,t,a){switch(arguments.length){case 0:return n;case 1:return u(r)?n:i(function(n,t){return e(r,n,t)});case 2:return u(r)&&u(t)?n:u(r)?i(function(n,r){return e(n,t,r)}):u(t)?i(function(n,t){return e(r,n,t)}):o(function(n){return e(r,t,n)});default:return u(r)&&u(t)&&u(a)?n:u(r)&&u(t)?i(function(n,r){return e(n,r,a)}):u(r)&&u(a)?i(function(n,r){return e(n,t,r)}):u(t)&&u(a)?i(function(n,t){return e(r,n,t)}):u(r)?o(function(n){return e(n,t,a)}):u(t)?o(function(n){return e(r,n,a)}):u(a)?o(function(n){return e(r,t,n)}):e(r,t,a)}}}var l=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function f(e){return"[object String]"===Object.prototype.toString.call(e)}"undefined"!=typeof Symbol&&Symbol.iterator;function y(e,n){return Object.prototype.hasOwnProperty.call(n,e)}var p=Object.prototype.toString,d=function(){return"[object Arguments]"===p.call(arguments)?function(e){return"[object Arguments]"===p.call(e)}:function(e){return y("callee",e)}},g=!{toString:null}.propertyIsEnumerable("toString"),v=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=function(){return arguments.propertyIsEnumerable("length")}(),m=function(e,n){for(var r=0;r<e.length;){if(e[r]===n)return!0;r+=1}return!1},S=o("function"!=typeof Object.keys||b?function(e){if(Object(e)!==e)return[];var n,r,t=[],a=b&&d(e);for(n in e)!y(n,e)||a&&"length"===n||(t[t.length]=n);if(g)for(r=v.length-1;r>=0;)y(n=v[r],e)&&!m(t,n)&&(t[t.length]=n),r-=1;return t}:function(e){return Object(e)!==e?[]:Object.keys(e)}),h=o(function(e){for(var n=S(e),r=n.length,t=[],a=0;a<r;)t[a]=e[n[a]],a+=1;return t}),j=o(function(e){return null==e});var R=o(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function O(e,n){return function(){var r=arguments.length;if(0===r)return n();var t=arguments[r-1];return l(t)||"function"!=typeof t[e]?n.apply(this,arguments):t[e].apply(t,Array.prototype.slice.call(arguments,0,r-1))}}function A(e){for(var n,r=[];!(n=e.next()).done;)r.push(n.value);return r}function E(e,n,r){for(var t=0,a=r.length;t<a;){if(e(n,r[t]))return!0;t+=1}return!1}var w=i(function(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n});function k(e,n,r,t){var a=A(e);function c(e,n){return q(e,n,r.slice(),t.slice())}return!E(function(e,n){return!E(c,n,e)},A(n),a)}function q(e,n,r,t){if(w(e,n))return!0;var a,c,u=R(e);if(u!==R(n))return!1;if(null==e||null==n)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof n.equals)return"function"==typeof e.equals&&e.equals(n)&&"function"==typeof n.equals&&n.equals(e);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(a=e.constructor,null==(c=String(a).match(/^function (\w*)/))?"":c[1]))return e===n;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof n||!w(e.valueOf(),n.valueOf()))return!1;break;case"Date":if(!w(e.valueOf(),n.valueOf()))return!1;break;case"Error":return e.name===n.name&&e.message===n.message;case"RegExp":if(e.source!==n.source||e.global!==n.global||e.ignoreCase!==n.ignoreCase||e.multiline!==n.multiline||e.sticky!==n.sticky||e.unicode!==n.unicode)return!1}for(var o=r.length-1;o>=0;){if(r[o]===e)return t[o]===n;o-=1}switch(u){case"Map":return e.size===n.size&&k(e.entries(),n.entries(),r.concat([e]),t.concat([n]));case"Set":return e.size===n.size&&k(e.values(),n.values(),r.concat([e]),t.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=S(e);if(i.length!==S(n).length)return!1;var s=r.concat([e]),l=t.concat([n]);for(o=i.length-1;o>=0;){var f=i[o];if(!y(f,n)||!q(n[f],e[f],s,l))return!1;o-=1}return!0}var x=i(function(e,n){return q(e,n,[],[])});var I=function(e){return(e<10?"0":"")+e};Date.prototype.toISOString;function C(e){return"[object Object]"===Object.prototype.toString.call(e)}var N=o(function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():l(e)?[]:f(e)?"":C(e)?{}:d(e)?function(){return arguments}():void 0}),M=i(O("forEach",function(e,n){for(var r=n.length,t=0;t<r;)e(n[t]),t+=1;return n}));function P(e){return e}var U=o(P);var _=o(function(e){return null!=e&&x(e,N(e))}),D=s(function(e,n,r){return e(n(r))});var z=o(function(e){var n=[];for(var r in e)y(r,e)&&(n[n.length]=[r,e[r]]);return n}),B="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",T=(String.prototype.trim,process.env.NODE_ENV),V=function(e,n,r,t,a,c,u,o){if("production"!==T&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var i;if(void 0===n)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[r,t,a,c,u,o],l=0;(i=new Error(n.replace(/%s/g,function(){return s[l++]}))).name="Invariant Violation"}throw i.framesToPop=1,i}};var F=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};const G=e=>j(e)||_(e)?U:n.combineReducers(F({},e));e.createExtensibleStore=((e,u={},o=n.compose)=>{const{sagaMiddleware:i}=u,s=[...h(u),(e=>()=>n=>u=>{switch(u.type){case r:e().injectReducers(u.payload);case t:e().removeReducers(u.payload);break;case a:e().injectSaga(u.payload);break;case c:e().cancelSaga(u.payload)}return n(u)})(()=>l)],l=n.createStore(U,e,o(n.applyMiddleware(...s)));return l.asyncReducers={},l.injectReducers=(e=>(D(M(([e,n])=>l.asyncReducers[e]=n),z)(e),l.replaceReducer(G(l.asyncReducers)))),l.removeReducers=(e=>(M(e=>delete l.asyncReducers[e])(e),l.replaceReducer(G(l.asyncReducers)))),l.removeReducer=(e=>(delete l.asyncReducers[e],l.replaceReducer(G(l.asyncReducers)))),l.injectReducer=((e,n)=>l.asyncReducers[e]?l:(l.asyncReducers[e]=n,l.replaceReducer(G(l.asyncReducers)))),l.injectedSagas={},l.injectSaga=(({key:e,saga:n})=>{V(!j(i),"You must provide sagaMiddleware when using createExtensibleStore helper"),j(l.injectedSagas[e])||l.injectedSagas[e].saga!==n||l.injectedSagas[e].task.cancel(),l.injectedSagas[e]={saga:n,task:i.run(n)}}),l.cancelSaga=(e=>{j(l.injectedSagas[e])||(l.injectedSagas[e].task.cancel(),delete l.injectedSagas[e])}),l}),e.injectReducers=(e=>({type:r,payload:e})),e.removeReducers=(e=>({type:t,payload:e})),e.injectSaga=(e=>({type:a,payload:e})),e.cancelSaga=(e=>({type:c,payload:e})),Object.defineProperty(e,"__esModule",{value:!0})});
